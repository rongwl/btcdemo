TESTS = unit_test/test_util \
        unit_test/test_crypto \
        unit_test/test_chain \
        unit_test/test_network \
        unit_test/test_fullnode
bin_PROGRAMS += unit_test/test_util \
                unit_test/test_crypto \
                unit_test/test_chain \
                unit_test/test_network \
                unit_test/test_fullnode 
#TEST_SRCDIR = unit_test
#TEST_BINARY = unit_test/test_btclite


UNIT_TEST_UTILITY_DIR = -I$(srcdir)/unit_test/utility

# test_fullnode binary #
unit_test_test_fullnode_SOURCES = unit_test/fullnode/test_fullnode.cpp \
                                  unit_test/fullnode/config_tests.cpp

unit_test_test_fullnode_CPPFLAGS = $(AM_CPPFLAGS) \
                                   $(GTEST_CFLAGS) \
                                   $(GLOG_CFLAGS) \
                                   $(BOTAN_CFLAGS) \
                                   $(BTCLITE_INCLUDES)
unit_test_test_fullnode_LDADD = \
                                $(LIBBTCLITE_FULLNODE) \
                                $(LIBBTCLITE_NETWORK) \
                                $(LIBBTCLITE_UTIL)
unit_test_test_fullnode_LDADD += $(GTEST_LIBS) \
                                 $(GLOG_LIBS) \
                                 $(PTHREAD_LIBS) \
                                 $(STDCPP_FILESYSTEM_LIBS) 


# test_network binary #
unit_test_test_network_SOURCES = unit_test/network/test_network.cpp \
                                 unit_test/network/network_address_tests.cpp \
                                 unit_test/network/params_tests.cpp \
                                 unit_test/network/netbase_tests.cpp \
                                 unit_test/network/net_tests.cpp \
                                 unit_test/network/bandb_tests.cpp \
                                 unit_test/network/peers_tests.cpp \
                                 unit_test/network/protocol/message_tests.cpp \
                                 unit_test/network/protocol/address_tests.cpp \
                                 unit_test/network/protocol/ping_tests.cpp \
                                 unit_test/network/protocol/reject_tests.cpp \
                                 unit_test/network/protocol/version_tests.cpp \
                                 unit_test/network/msg_process_tests.cpp \
                                 unit_test/network/block_sync_tests.cpp \
                                 unit_test/network/node_tests.cpp \
                                 unit_test/network/acceptor_tests.cpp \
                                 unit_test/network/connector_tests.cpp \
                                 unit_test/network/p2p_tests.cpp \
                                 unit_test/network/socket_tests.cpp \
                                 unit_test/network/block_sync_tests.h \
                                 unit_test/network/msg_process.h \
                                 unit_test/network/node_tests.h \
                                 unit_test/network/protocol/message_tests.h \
                                 unit_test/network/protocol/version_tests.h \
                                 unit_test/network/protocol/ping_tests.h \
                                 unit_test/network/protocol/reject_tests.h \
                                 unit_test/network/socket_tests.h

unit_test_test_network_CPPFLAGS = $(AM_CPPFLAGS) \
                                  $(GTEST_CFLAGS) \
                                  $(GMOCK_CFLAGS) \
                                  $(GLOG_CFLAGS) \
                                  $(BOTAN_CFLAGS) \
                                  $(UNIT_TEST_UTILITY_DIR) \
                                  $(BTCLITE_INCLUDES)
unit_test_test_network_LDADD = $(LIBBTCLITE_FULLNODE) \
                               $(LIBBTCLITE_NETWORK) \
                               $(LIBBTCLITE_CHAIN) \
                               $(LIBBTCLITE_CRYPTO) \
                               $(LIBBTCLITE_UTIL)
unit_test_test_network_LDADD += $(GTEST_LIBS) \
                                $(GMOCK_LIBS) \
                                $(PTHREAD_LIBS) \
                                $(PROTOBUF_LIBS) \
                                $(BOTAN_LIBS) \
                                $(GLOG_LIBS) \
                                $(EVENT_LIBS) \
                                $(EVENT_PTHREADS_LIBS) \
                                $(STDCPP_FILESYSTEM_LIBS)


# test_crypto binary #
unit_test_test_crypto_SOURCES = unit_test/crypto/test_crypto.cpp \
                                unit_test/crypto/hash_tests.cpp

unit_test_test_crypto_CPPFLAGS = $(AM_CPPFLAGS) \
                                 $(GTEST_CFLAGS) \
                                 $(BOTAN_CFLAGS) \
                                 $(BTCLITE_INCLUDES)
unit_test_test_crypto_LDADD = $(LIBBTCLITE_CRYPTO) \
                              $(LIBBTCLITE_CHAIN) \
                              $(LIBBTCLITE_UTIL)
unit_test_test_crypto_LDADD += $(GTEST_LIBS) \
                               $(PTHREAD_LIBS) \
                               $(BOTAN_LIBS)


# test_chain binary #
unit_test_test_chain_SOURCES = unit_test/chain/test_chain.cpp \
                               unit_test/chain/params_tests.cpp

unit_test_test_chain_CPPFLAGS = $(AM_CPPFLAGS) \
                                 $(GTEST_CFLAGS) \
                                 $(BOTAN_CFLAGS) \
                                 $(BTCLITE_INCLUDES)
unit_test_test_chain_LDADD = $(LIBBTCLITE_CHAIN) \
                             $(LIBBTCLITE_UTIL)
unit_test_test_chain_LDADD += $(GTEST_LIBS) \
                              $(BOTAN_LIBS)


# test_util binary #
unit_test_test_util_SOURCES = unit_test/utility/test_util.cpp \
                              unit_test/utility/string_encoding_tests.cpp \
                              unit_test/utility/random_tests.cpp \
                              unit_test/utility/stream_tests.cpp \
                              unit_test/utility/serialize_tests.cpp \
                              unit_test/utility/util_tests.cpp \
                              unit_test/utility/util_tests.h

unit_test_test_util_CPPFLAGS = $(AM_CPPFLAGS) \
                               $(GTEST_CFLAGS) \
                               $(BOTAN_CFLAGS) \
                               $(BTCLITE_INCLUDES)
unit_test_test_util_LDADD = $(LIBBTCLITE_UTIL)
unit_test_test_util_LDADD += $(GTEST_LIBS) \
                             $(GLOG_LIBS) \
                             $(PTHREAD_LIBS) \
                             $(BOTAN_LIBS) \
                             $(STDCPP_FILESYSTEM_LIBS)
